# Change docker location

The standard data directory used for docker is `/var/lib/docker` on our virtual machine. Since this directory will store a lot of data it can become quite large. Therefore, we move the docker data directory to our volumne `mnt/vdb`.

Here are the steps to move the directory:

- Stop docker daemon

```bash
sudo systemctl stop docker

```

- Create a new docker directory in /mnt/vdb:

```bash
sudo mkdir -p /mnt/vdb/docker

```

- Make a copy of your current docker directory in the new location:

```bash
sudo rsync -a /var/lib/docker/ /mnt/vdb/docker

```

- Create a backup

```bash
sudo mv /var/lib/docker /var/lib/docker-backup
```

- Create a symbolic link (symlink):


```bash
sudo ln -s /mnt/vdb/docker /var/lib/docker
```

- Start docker:

```bash
sudo systemctl start docker
```

- Check if the docker image "hello-world" is still accessible:

```bash
sudo docker ps -a
```

You can now remove your backup:


```bash
sudo rm -rf /var/lib/docker-backup

```



<!--


Test out your newly expanded capacity by pulling a new docker image and running it — here’s a postgres image as an example:


```bash
docker pull postgres
```

Start a postgres instance


```bash
docker run --name some-postgres -e POSTGRES_PASSWORD=mysecretpassword -d postgres
```

The default postgres user and database are created in the entrypoint with initdb.

The postgres database is a default database meant for use by users, utilities and third party applications.


Mount On Startup

Assuming everything is now fine, you’ll want to ensure your disk gets mounted on the /var/lib/docker directory permanently on start-up:


```bash
nano /etc/fstab
```

Add the following line at the end of the file, again assuming /dev/vdb is your device and also assuming is formatted as an ext4 filesystem.



Rollback
If something goes wrong or for whatever reason, you want to return to your previous setup — you should be able to rollback in the following way:


```bash
systemctl stop docker
umount /dev/sda2
mv /var/lib/docker-backup /var/lib/docker
# Remove the additional line added to /etc/fstab (if applicable)
systemctl start docker
```
-->